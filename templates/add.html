{% extends 'base.html' %}
{% block content %}
<h2 style="margin-bottom:20px; color:#2d6a4f;">Add New Secret 🔐</h2>

<form method="POST" class="form-card" autocomplete="off">
    <!-- Dummy fields to prevent autofill -->
    <input type="text" name="fakeuser" style="display:none">
    <input type="password" name="fakepass" style="display:none">

    <!-- Title -->
    <label>Title</label><br>
    <input type="text" name="title" autocomplete="off" required style="margin-bottom:15px;"><br>

    <!-- Secret -->
    <label>Secret</label><br>
    <input type="password" name="secret" id="secretInput" autocomplete="new-password" required style="margin-bottom:5px;">
    <button type="button" onclick="togglePassword()" style="margin-left:5px; border:none; background:none; cursor:pointer;">👁️</button>
    <div id="strengthText" style="margin-top:5px; font-weight:bold;"></div><br>

    <!-- Submit -->
    <button type="submit">➕ Save Secret</button>
</form>

<script>
function togglePassword() {
    const input = document.getElementById("secretInput");
    input.type = input.type === "password" ? "text" : "password";
}

document.getElementById("secretInput").addEventListener("input", function() {
    const val = this.value;
    const strengthText = document.getElementById("strengthText");

    let strength = "Weak 🔴";
    if(val.length >= 8){
        if(/[A-Z]/.test(val) && /[a-z]/.test(val) && /[0-9]/.test(val) && /[\W_]/.test(val)) {
            strength = "Strong ✅";
        } else {
            strength = "Medium 🟡";
        }
    }
    strengthText.innerText = "Strength: " + strength;
});
</script>
{% endblock %}
